<h2>
  Hello, <%= @logged_in_user.username %>
</h2>

<p>Gender: <%= @logged_in_user.gender %></p>
<% if @logged_in_user.birthday %>
<p>Birthday: <%= @logged_in_user.birthday.strftime("%B %d, %Y") %></p>
<p>Sign: <%= @logged_in_user.birthday.zodiac_sign %></p>
<% end %>
<p>Bloodtype: <%= @logged_in_user.bloodtype %></p>

<%= button_to "Edit Profile", edit_user_path(@logged_in_user), method: :get %>

<% if @logged_in_user.possessions.empty? %>
  <h3>You have no items in your inventory!</h3>
<% else %>
  <h3>You have the following items:</h3>
  <ul>
    <% @logged_in_user.possessions.each do |p| %>
    <li>
      <div class="flex-horizontal">
        <div class="flex-child">
          <%= link_to pluralize(p.quantity, p.item.name), p.item %>
        </div>

        <div class="flex-child">
          <% if p.quantity > 1 %>
            <%= form_for(p, url: {controller: 'possessions', action: 'discard_one'}) do |f| %>
              <%= f.hidden_field :id, value: p.id %>
              <%= f.submit "Discard one" %>
            <% end %>
          <% end %>

          <%= form_for(p, url: {controller: 'possessions', action: 'discard_all'}) do |f| %>
            <%= f.hidden_field :id, value: p.id %>
            <%= f.submit "Discard all" %>
          <% end %>
        </div>
      </div>
    </li>
    <% end %>
  </ul>
  <h3>You have <%= @logged_in_user.tokens %> tokens.</h3>
<% end %>
<p><%= button_to "Purchase items", items_path, method: :get %></p>


<% if @logged_in_user.castings.empty? %>
  <h3>You have not cast any spells!</h3>
<% else %>
  <h3>You have cast the following spells:</h3>
  <ul>
    <% @logged_in_user.castings.each do |c| %>
    <li>
      <%= link_to c.spell.name, c.spell %>
      upon <%= c.subject_1 %>
      <% if !c.subject_2.empty? %>
        and <%= c.subject_2 %>
      <% end %>
      on <%= c.created_at.strftime("%B %d, %Y") %>
    </li>
    <% end %>
  </ul>
<% end %>
